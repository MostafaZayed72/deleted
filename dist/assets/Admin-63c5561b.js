import{_ as A,u as k,r as N,c as s,o as b,a as f,b as h,d as x,e as g,f as y,n as v}from"./index-85c8a86e.js";const E={name:"Admin",setup(){const p=k(),o=N(null),l=()=>{try{return{general:JSON.parse(localStorage.getItem("generalConfig")||"{}"),security:JSON.parse(localStorage.getItem("securityConfig")||"{}"),appearance:JSON.parse(localStorage.getItem("appearanceConfig")||"{}"),content:JSON.parse(localStorage.getItem("contentConfig")||"{}"),registration:JSON.parse(localStorage.getItem("registrationConfig")||"{}")}}catch(e){return console.error("خطأ في تحميل الإعدادات:",e),{}}},c=()=>{const t=l().appearance||{};t.fontFamily&&document.documentElement.style.setProperty("--font-family",t.fontFamily),t.primaryColor&&document.documentElement.style.setProperty("--primary-color",t.primaryColor),t.secondaryColor&&document.documentElement.style.setProperty("--secondary-color",t.secondaryColor),t.baseFontSize&&(document.documentElement.style.fontSize=t.baseFontSize)},a=s(()=>l()),u=s(()=>{var e;return((e=a.value.general)==null?void 0:e.platformName)||"مركز صالح بن صالح"}),i=s(()=>{const e=a.value.appearance||{},t={"bg-gray-50":!e.darkMode,"bg-gray-900":e.darkMode};if(e.fontFamily){const r=m(e.fontFamily);r&&(t[r]=!0)}return t}),m=e=>({Tahoma:"font-tahoma",Arial:"font-arial",Helvetica:"font-helvetica","'Segoe UI'":"font-segoe","'Traditional Arabic'":"font-traditional"})[e]||"",S=s(()=>({backgroundColor:(a.value.appearance||{}).primaryColor||"#01352c"})),_=s(()=>{const e=a.value.appearance||{};return{"max-w-full":e.fullWidth,"max-w-7xl":!e.fullWidth}}),C=()=>{const e=localStorage.getItem("userData");e&&(o.value=JSON.parse(e))},d=()=>{confirm("هل تريد تسجيل الخروج؟")&&(localStorage.removeItem("authToken"),localStorage.removeItem("userData"),localStorage.removeItem("lastActivity"),p.push("/login"))},I=()=>{const t=(a.value.security||{}).sessionTimeout||60;if(t>0){const r=localStorage.getItem("lastActivity");r&&(new Date().getTime()-parseInt(r))/(1e3*60)>t&&(alert("انتهت الجلسة بسبب عدم النشاط"),d())}},n=()=>{localStorage.setItem("lastActivity",new Date().getTime().toString())};return b(()=>{C(),c(),n(),document.addEventListener("click",n),document.addEventListener("keypress",n);const e=setInterval(I,6e4);return()=>{clearInterval(e),document.removeEventListener("click",n),document.removeEventListener("keypress",n)}}),{userData:o,platformName:u,appearanceClasses:i,navStyle:S,containerClasses:_,logout:d}}};function w(p,o,l,c,a,u){const i=f("AppHeader"),m=f("router-view");return h(),x("div",{dir:"rtl",class:v(["min-h-screen",c.appearanceClasses])},[g(i),o[0]||(o[0]=y("div",{class:"pt-6"},null,-1)),y("div",{class:v(["container mx-auto px-4 py-8",c.containerClasses])},[g(m)],2)],2)}const J=A(E,[["render",w],["__scopeId","data-v-3c30b6ce"]]);export{J as default};

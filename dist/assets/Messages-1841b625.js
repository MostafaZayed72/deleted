import{_ as xe,q as be,u as ue,r as x,c as _,o as ye,a as me,b as l,d as i,e as ve,f as e,h as f,t as n,w as M,v as T,n as d,j as y,F as k,l as j,s as L,i as V,m as fe,y as pe,C as z}from"./index-85c8a86e.js";const ke={name:"EmployeeMessages",setup(){const N=be(),r=ue(),b=x([]),t=x(null),D=x(""),w=x(""),R=x(!1),h=x(!1),s=x(!1),m=x(""),p=x(""),S=x(!1),U=x("all"),I=x(null),u=x(null),v=JSON.parse(localStorage.getItem("userData")||"{}"),P=x(["ðŸ˜€","ðŸ˜‚","ðŸ¥°","ðŸ˜Ž","ðŸ¤”","ðŸ‘","â¤ï¸","ðŸ”¥","âœ¨","ðŸŽ‰","ðŸ™","ðŸ’¯"]),J=_(()=>{const a=b.value.length,o=b.value.reduce((c,ce)=>c+ce.unreadCount,0),g=b.value.filter(c=>new Date-new Date(c.lastMessage.timestamp)<864e5).length;return{totalConversations:a,unreadMessages:o,activeChats:g,avgResponseTime:15}}),H=_(()=>{let a=b.value;if(D.value){const o=D.value.toLowerCase();a=a.filter(g=>g.participant.name.toLowerCase().includes(o)||g.lastMessage.text.toLowerCase().includes(o)||O(g.participant.role).toLowerCase().includes(o))}return U.value==="unread"?a=a.filter(o=>o.unreadCount>0):U.value==="users"&&(a=a.filter(o=>o.participant.role==="user")),a}),B=_(()=>JSON.parse(localStorage.getItem("libraryUsers")||"[]").filter(o=>o.id!==v.id)),K=_(()=>B.value.filter(a=>a.role==="admin")),Q=_(()=>B.value.filter(a=>a.role==="user")),E=()=>{const a=`conversations_${v.id}`,o=JSON.parse(localStorage.getItem(a)||"[]");if(N.params.conversationId){const g=o.find(c=>c.id===parseInt(N.params.conversationId));g&&(t.value=g)}b.value=o},C=()=>{const a=`conversations_${v.id}`;localStorage.setItem(a,JSON.stringify(b.value))},F=a=>{t.value=a,h.value=!1,s.value=!1,r.push(`/employee/messages/${a.id}`),a.unreadCount>0&&(a.unreadCount=0,a.messages.forEach(o=>{o.sender!==v.id&&(o.read=!0)}),C()),z(()=>{A(),u.value&&u.value.focus()})},q=()=>{if(!w.value.trim()||!t.value)return;const a={id:Date.now(),sender:v.id,text:w.value.trim(),timestamp:new Date().toISOString(),read:!1};t.value.messages.push(a),t.value.lastMessage=a,C(),w.value="",s.value=!1,u.value&&(u.value.style.height="auto"),z(()=>{A()})},G=()=>{if(!m.value||!p.value.trim())return;const a=B.value.find(c=>c.id===m.value);if(!a)return;const o={id:Date.now(),sender:v.id,text:p.value.trim(),timestamp:new Date().toISOString(),read:!1},g={id:Date.now(),participant:a,messages:[o],lastMessage:o,unreadCount:0,online:Math.random()>.5,priority:S.value?"high":null};b.value.unshift(g),C(),R.value=!1,m.value="",p.value="",S.value=!1,F(g)},A=()=>{I.value&&(I.value.scrollTop=I.value.scrollHeight)},W=()=>{u.value&&(u.value.style.height="auto",u.value.style.height=u.value.scrollHeight+"px")},X=()=>{s.value=!s.value},Y=a=>{w.value+=a,s.value=!1,u.value&&u.value.focus()},Z=a=>{U.value=a},$=()=>{E()},ee=()=>{t.value&&(t.value.priority=t.value.priority==="high"?null:"high",C())},te=()=>{if(!t.value)return;const a={participant:t.value.participant.name,messages:t.value.messages,exportDate:new Date().toISOString()},o=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),g=URL.createObjectURL(o),c=document.createElement("a");c.href=g,c.download=`conversation-${t.value.id}.json`,c.click(),URL.revokeObjectURL(g)},re=a=>{const o=new Date(a),c=new Date-o;return c<6e4?"Ø§Ù„Ø¢Ù†":c<36e5?`Ù…Ù†Ø° ${Math.floor(c/6e4)} Ø¯Ù‚ÙŠÙ‚Ø©`:c<864e5?o.toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):c<6048e5?o.toLocaleDateString("ar-SA",{weekday:"long"}):o.toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"})},se=a=>a?new Date(a).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}):"ØºÙŠØ± Ù…Ø­Ø¯Ø¯",ae=a=>new Date(a).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}),oe=a=>{if(a===0)return!0;const o=new Date(t.value.messages[a].timestamp),g=new Date(t.value.messages[a-1].timestamp);return o.toDateString()!==g.toDateString()},ne=a=>a.split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2),le=a=>({admin:"bg-red-500",employee:"bg-blue-500",user:"bg-green-500"})[a]||"bg-gray-500",ie=a=>({admin:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",employee:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",user:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})[a]||"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",O=a=>({admin:"Ù…Ø¯ÙŠØ±",employee:"Ù…ÙˆØ¸Ù",user:"Ù…Ø³ØªÙÙŠØ¯"})[a]||a,de=()=>{t.value&&(t.value.unreadCount=0,t.value.messages.forEach(a=>{a.sender!==v.id&&(a.read=!0)}),C())},ge=()=>{t.value&&confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©ØŸ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡.")&&(b.value=b.value.filter(a=>a.id!==t.value.id),C(),t.value=null,h.value=!1,r.push("/employee/messages"))};return ye(()=>{E()}),{conversations:b,selectedConversation:t,searchQuery:D,newMessage:w,showNewMessageModal:R,showConversationInfo:h,showEmojiPicker:s,newMessageRecipient:m,newMessageText:p,markAsImportant:S,currentFilter:U,messagesContainer:I,messageInput:u,currentUser:v,emojis:P,stats:J,filteredConversations:H,availableRecipients:B,adminRecipients:K,userRecipients:Q,selectConversation:F,sendMessage:q,createNewConversation:G,formatDate:re,formatMessageDate:se,formatMessageTime:ae,showDateSeparator:oe,getInitials:ne,getUserColor:le,getRoleBadgeClass:ie,getUserRole:O,markConversationAsRead:de,deleteConversation:ge,toggleEmojiPicker:X,addEmoji:Y,setFilter:Z,refreshConversations:$,togglePriority:ee,exportConversation:te,autoResize:W,scrollToBottom:A}}},we={class:"min-h-screen bg-gray-50 dark:bg-gray-900"},he={class:"container mx-auto px-4 py-8"},Ce={class:"max-w-7xl mx-auto"},_e={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4 mb-8"},Me={class:"flex flex-wrap gap-3"},je={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},De={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Re={class:"flex items-center gap-3"},Se={class:"text-2xl font-bold text-gray-800 dark:text-white"},Ue={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Ie={class:"flex items-center gap-3"},Be={class:"text-2xl font-bold text-gray-800 dark:text-white"},Ne={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Ae={class:"flex items-center gap-3"},Te={class:"text-2xl font-bold text-gray-800 dark:text-white"},Le={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},Ee={class:"flex items-center gap-3"},Fe={class:"text-2xl font-bold text-gray-800 dark:text-white"},Oe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Ve={class:"grid grid-cols-1 lg:grid-cols-4 min-h-[600px]"},ze={class:"lg:col-span-1 border-l border-gray-200 dark:border-gray-700 flex flex-col"},Pe={class:"p-4 border-b border-gray-200 dark:border-gray-700"},Je={class:"relative mb-3"},He={class:"flex gap-1"},Ke={class:"flex-1 overflow-y-auto"},Qe={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},qe=["onClick"],Ge={class:"flex items-start gap-3"},We={class:"relative flex-shrink-0"},Xe={class:"flex-1 min-w-0"},Ye={class:"flex justify-between items-start mb-1"},Ze={class:"flex items-center gap-2"},$e={class:"font-semibold text-gray-800 dark:text-white truncate text-sm"},et={class:"text-xs text-gray-500 whitespace-nowrap"},tt={class:"text-sm text-gray-600 dark:text-gray-300 truncate mb-2 leading-relaxed"},rt={class:"flex justify-between items-center"},st={key:1},at={class:"flex items-center gap-1"},ot={key:1,class:"bg-[#1B3C53] text-white text-xs px-2 py-1 rounded-full min-w-5 h-5 flex items-center justify-center"},nt={class:"lg:col-span-3 flex flex-col"},lt={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex justify-between items-center"},it={class:"flex items-center gap-3"},dt={class:"relative"},gt={class:"flex items-center gap-2"},ct={class:"font-semibold text-gray-800 dark:text-white"},xt={class:"flex items-center gap-2"},bt=["title"],ut={ref:"messagesContainer",class:"flex-1 p-6 space-y-4 overflow-y-auto bg-gray-50 dark:bg-gray-900"},yt={key:0,class:"text-center py-4"},mt={key:0,class:"flex justify-center my-6"},vt={class:"bg-white dark:bg-gray-800 text-gray-500 text-sm px-4 py-2 rounded-full border border-gray-200 dark:border-gray-700"},ft={class:"text-sm leading-relaxed mb-2"},pt={class:"flex justify-end items-center gap-2"},kt={class:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},wt={class:"flex-1 relative"},ht={key:0,class:"absolute bottom-full left-0 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-xl p-3 w-64 h-40 overflow-y-auto"},Ct={class:"grid grid-cols-8 gap-1"},_t=["onClick"],Mt=["disabled"],jt={key:1,class:"flex-1 flex flex-col items-center justify-center text-center p-8 bg-gray-50 dark:bg-gray-900"},Dt={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Rt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-lg"},St={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Ut={class:"p-6"},It={class:"mb-4"},Bt={label:"Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"},Nt=["value"],At={label:"Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ†"},Tt=["value"],Lt={class:"mb-4"},Et={class:"flex items-center justify-between"},Ft={class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},Ot={class:"text-sm text-gray-500"},Vt={class:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700"},zt=["disabled"],Pt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Jt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl w-full max-w-md"},Ht={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Kt={class:"p-6 space-y-4"},Qt={class:"text-center"},qt={class:"font-semibold text-gray-800 dark:text-white"},Gt={class:"text-sm text-gray-500"},Wt={class:"grid grid-cols-2 gap-4 text-sm"},Xt={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},Yt={class:"font-semibold text-gray-800 dark:text-white"},Zt={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg"},$t={class:"font-semibold text-gray-800 dark:text-white"},er={class:"border-t border-gray-200 dark:border-gray-700 pt-4"};function tr(N,r,b,t,D,w){var h;const R=me("AppHeader");return l(),i("div",we,[ve(R),e("div",he,[e("div",Ce,[e("div",_e,[r[26]||(r[26]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-800 dark:text-white mb-2"}," ðŸ“¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„ÙˆØ§Ø±Ø¯ "),e("p",{class:"text-gray-600 dark:text-gray-400"}," Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­Ø§Ø¯Ø«Ø§ØªÙƒ ÙˆØ±Ø³Ø§Ø¦Ù„Ùƒ Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ÙˆØ§Ù„Ø¥Ø¯Ø§Ø±Ø© ")],-1)),e("div",Me,[e("button",{onClick:r[0]||(r[0]=(...s)=>t.refreshConversations&&t.refreshConversations(...s)),class:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[...r[24]||(r[24]=[e("span",{class:"material-icons text-sm"},"refresh",-1),f(" ØªØ­Ø¯ÙŠØ« ",-1)])]),e("button",{onClick:r[1]||(r[1]=s=>t.showNewMessageModal=!0),class:"flex items-center gap-2 px-4 py-2 bg-[#1B3C53] text-white rounded-xl hover:bg-[#234C6A] transition-colors"},[...r[25]||(r[25]=[e("span",{class:"material-icons text-sm"},"add",-1),f(" Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ",-1)])])])]),e("div",je,[e("div",De,[e("div",Re,[r[28]||(r[28]=e("div",{class:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"},[e("span",{class:"material-icons text-blue-600 dark:text-blue-400"},"chat")],-1)),e("div",null,[e("p",Se,n(t.stats.totalConversations),1),r[27]||(r[27]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª",-1))])])]),e("div",Ue,[e("div",Ie,[r[30]||(r[30]=e("div",{class:"p-2 bg-green-100 dark:bg-green-900 rounded-lg"},[e("span",{class:"material-icons text-green-600 dark:text-green-400"},"mark_email_read")],-1)),e("div",null,[e("p",Be,n(t.stats.unreadMessages),1),r[29]||(r[29]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ø±Ø³Ø§Ø¦Ù„ ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡Ø©",-1))])])]),e("div",Ne,[e("div",Ae,[r[32]||(r[32]=e("div",{class:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg"},[e("span",{class:"material-icons text-purple-600 dark:text-purple-400"},"group")],-1)),e("div",null,[e("p",Te,n(t.stats.activeChats),1),r[31]||(r[31]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ù†Ø´Ø·Ø©",-1))])])]),e("div",Le,[e("div",Ee,[r[34]||(r[34]=e("div",{class:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg"},[e("span",{class:"material-icons text-orange-600 dark:text-orange-400"},"schedule")],-1)),e("div",null,[e("p",Fe,n(t.stats.avgResponseTime)+"m",1),r[33]||(r[33]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„Ø±Ø¯",-1))])])])]),e("div",Oe,[e("div",Ve,[e("div",ze,[e("div",Pe,[e("div",Je,[M(e("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>t.searchQuery=s),type:"text",placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª...",class:"w-full pl-10 pr-4 py-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-gray-800 dark:text-white focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent"},null,512),[[T,t.searchQuery]]),r[35]||(r[35]=e("span",{class:"material-icons absolute right-3 top-3 text-gray-400 text-sm"}," search ",-1))]),e("div",He,[e("button",{onClick:r[3]||(r[3]=s=>t.setFilter("all")),class:d(["flex-1 px-3 py-1 text-xs rounded-lg transition-colors",t.currentFilter==="all"?"bg-[#1B3C53] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])}," Ø§Ù„ÙƒÙ„ ",2),e("button",{onClick:r[4]||(r[4]=s=>t.setFilter("unread")),class:d(["flex-1 px-3 py-1 text-xs rounded-lg transition-colors",t.currentFilter==="unread"?"bg-[#1B3C53] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])}," ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡ ",2),e("button",{onClick:r[5]||(r[5]=s=>t.setFilter("users")),class:d(["flex-1 px-3 py-1 text-xs rounded-lg transition-colors",t.currentFilter==="users"?"bg-[#1B3C53] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])}," Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† ",2)])]),e("div",Ke,[t.filteredConversations.length===0?(l(),i("div",Qe,[...r[36]||(r[36]=[e("span",{class:"material-icons text-4xl mb-3 text-gray-300"},"inbox",-1),e("p",null,"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§Ø¯Ø«Ø§Øª",-1)])])):y("",!0),(l(!0),i(k,null,j(t.filteredConversations,s=>{var m,p;return l(),i("div",{key:s.id,onClick:S=>t.selectConversation(s),class:d(["p-4 border-b border-gray-100 dark:border-gray-700 cursor-pointer transition-all duration-200",{"bg-blue-50 dark:bg-blue-900/20 border-r-4 border-r-[#1B3C53]":((m=t.selectedConversation)==null?void 0:m.id)===s.id,"hover:bg-gray-50 dark:hover:bg-gray-700":((p=t.selectedConversation)==null?void 0:p.id)!==s.id}])},[e("div",Ge,[e("div",We,[e("div",{class:d(["w-12 h-12 rounded-full flex items-center justify-center text-white text-sm font-semibold shadow-lg",t.getUserColor(s.participant.role)])},n(t.getInitials(s.participant.name)),3),e("span",{class:d(["absolute -bottom-0.5 -right-0.5 w-3 h-3 border-2 border-white dark:border-gray-800 rounded-full",s.online?"bg-green-500":"bg-gray-400"])},null,2)]),e("div",Xe,[e("div",Ye,[e("div",Ze,[e("h3",$e,n(s.participant.name),1),e("span",{class:d(["text-xs px-2 py-1 rounded-full",t.getRoleBadgeClass(s.participant.role)])},n(t.getUserRole(s.participant.role)),3)]),e("span",et,n(t.formatDate(s.lastMessage.timestamp)),1)]),e("p",tt,n(s.lastMessage.text),1),e("div",rt,[s.lastMessage.sender===t.currentUser.id?(l(),i("span",{key:0,class:d(["text-xs flex items-center gap-1",s.lastMessage.read?"text-green-500":"text-gray-400"])},[r[37]||(r[37]=e("span",{class:"material-icons text-xs"},"done_all",-1)),f(" "+n(s.lastMessage.read?"ØªÙ… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©":"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"),1)],2)):(l(),i("span",st)),e("div",at,[s.priority?(l(),i("span",{key:0,class:d(["w-2 h-2 rounded-full",s.priority==="high"?"bg-red-500":"bg-yellow-500"])},null,2)):y("",!0),s.unreadCount>0?(l(),i("span",ot,n(s.unreadCount),1)):y("",!0)])])])])],10,qe)}),128))])]),e("div",nt,[t.selectedConversation?(l(),i(k,{key:0},[e("div",lt,[e("div",it,[e("div",dt,[e("div",{class:d(["w-12 h-12 rounded-full flex items-center justify-center text-white text-sm font-semibold shadow-lg",t.getUserColor(t.selectedConversation.participant.role)])},n(t.getInitials(t.selectedConversation.participant.name)),3),e("span",{class:d(["absolute -bottom-0.5 -right-0.5 w-3 h-3 border-2 border-white dark:border-gray-800 rounded-full",t.selectedConversation.online?"bg-green-500":"bg-gray-400"])},null,2)]),e("div",null,[e("div",gt,[e("h3",ct,n(t.selectedConversation.participant.name),1),e("span",{class:d(["text-xs px-2 py-1 rounded-full",t.getRoleBadgeClass(t.selectedConversation.participant.role)])},n(t.getUserRole(t.selectedConversation.participant.role)),3)]),e("p",{class:d(["text-sm flex items-center gap-1",t.selectedConversation.online?"text-green-500":"text-gray-500"])},[e("span",{class:d(["w-2 h-2 rounded-full",t.selectedConversation.online?"bg-green-500":"bg-gray-400"])},null,2),f(" "+n(t.selectedConversation.online?"Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†":"ØºÙŠØ± Ù…ØªØµÙ„"),1)],2)])]),e("div",xt,[e("button",{onClick:r[6]||(r[6]=(...s)=>t.togglePriority&&t.togglePriority(...s)),class:"p-2 text-gray-400 hover:text-yellow-500 transition-colors",title:t.selectedConversation.priority==="high"?"Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©":"ØªØ¹ÙŠÙŠÙ† Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ©"},[e("span",{class:d(["material-icons",t.selectedConversation.priority==="high"?"text-yellow-500":""])}," flag ",2)],8,bt),t.selectedConversation.unreadCount?(l(),i("button",{key:0,onClick:r[7]||(r[7]=(...s)=>t.markConversationAsRead&&t.markConversationAsRead(...s)),class:"p-2 text-gray-400 hover:text-green-500 transition-colors",title:"ØªØ¹Ù„ÙŠÙ… ÙƒÙ…Ù‚Ø±ÙˆØ¡"},[...r[38]||(r[38]=[e("span",{class:"material-icons"},"mark_email_read",-1)])])):y("",!0),e("button",{onClick:r[8]||(r[8]=s=>t.showConversationInfo=!0),class:"p-2 text-gray-400 hover:text-blue-500 transition-colors",title:"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©"},[...r[39]||(r[39]=[e("span",{class:"material-icons"},"info",-1)])]),e("button",{onClick:r[9]||(r[9]=(...s)=>t.deleteConversation&&t.deleteConversation(...s)),class:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Ø­Ø°Ù Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©"},[...r[40]||(r[40]=[e("span",{class:"material-icons"},"delete",-1)])])])]),e("div",ut,[t.selectedConversation.messages.length>0?(l(),i("div",yt,[...r[41]||(r[41]=[e("span",{class:"text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-4 py-2 rounded-full border border-gray-200 dark:border-gray-700"}," Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ",-1)])])):y("",!0),(l(!0),i(k,null,j(t.selectedConversation.messages,(s,m)=>(l(),i(k,{key:s.id},[t.showDateSeparator(m)?(l(),i("div",mt,[e("span",vt,n(t.formatMessageDate(s.timestamp)),1)])):y("",!0),e("div",{class:d(["flex gap-3 group",s.sender===t.currentUser.id?"justify-end":"justify-start"])},[s.sender!==t.currentUser.id?(l(),i("div",{key:0,class:d(["w-10 h-10 rounded-full flex items-center justify-center text-white text-sm font-semibold flex-shrink-0",t.getUserColor(t.selectedConversation.participant.role)])},n(t.getInitials(t.selectedConversation.participant.name)),3)):y("",!0),e("div",{class:d(["max-w-[70%] p-4 rounded-2xl relative transition-all duration-200 group-hover:shadow-lg",[s.sender===t.currentUser.id?"bg-[#1B3C53] text-white rounded-br-none":"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-bl-none"]])},[e("p",ft,n(s.text),1),e("div",pt,[e("span",{class:d(["text-xs",s.sender===t.currentUser.id?"text-blue-200":"text-gray-500 dark:text-gray-400"])},n(t.formatMessageTime(s.timestamp)),3),s.sender===t.currentUser.id?(l(),i("span",{key:0,class:d(["flex items-center gap-1 text-xs",s.read?"text-green-300":"text-blue-200"])},[r[42]||(r[42]=e("span",{class:"material-icons text-xs"},"done_all",-1)),f(" "+n(s.read?"ØªÙ… Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©":"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"),1)],2)):y("",!0)]),e("div",{class:d(["absolute w-3 h-3 transform rotate-45",[s.sender===t.currentUser.id?"bg-[#1B3C53] -right-1 top-0":"bg-white dark:bg-gray-800 border-l border-b border-gray-200 dark:border-gray-700 -left-1 top-0"]])},null,2)],2)],2)],64))),128))],512),e("div",kt,[e("form",{onSubmit:r[15]||(r[15]=L((...s)=>t.sendMessage&&t.sendMessage(...s),["prevent"])),class:"flex gap-3"},[e("button",{type:"button",onClick:r[10]||(r[10]=(...s)=>t.toggleEmojiPicker&&t.toggleEmojiPicker(...s)),class:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors"},[...r[43]||(r[43]=[e("span",{class:"material-icons"},"mood",-1)])]),e("div",wt,[M(e("textarea",{ref:"messageInput","onUpdate:modelValue":r[11]||(r[11]=s=>t.newMessage=s),onKeydown:[r[12]||(r[12]=V(L((...s)=>t.sendMessage&&t.sendMessage(...s),["exact","prevent"]),["enter"])),r[13]||(r[13]=V(L(s=>t.newMessage+=`
`,["shift","exact","prevent"]),["enter"]))],placeholder:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ...",rows:"1",class:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 rounded-xl text-gray-800 dark:text-white resize-none max-h-32 focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent",onInput:r[14]||(r[14]=(...s)=>t.autoResize&&t.autoResize(...s))},null,544),[[T,t.newMessage]]),t.showEmojiPicker?(l(),i("div",ht,[e("div",Ct,[(l(!0),i(k,null,j(t.emojis,s=>(l(),i("button",{key:s,onClick:m=>t.addEmoji(s),class:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-lg"},n(s),9,_t))),128))])])):y("",!0)]),e("button",{type:"submit",disabled:!t.newMessage.trim(),class:"px-6 py-3 bg-[#1B3C53] text-white rounded-xl hover:bg-[#234C6A] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[...r[44]||(r[44]=[e("span",{class:"material-icons text-sm"},"send",-1),f(" Ø¥Ø±Ø³Ø§Ù„ ",-1)])],8,Mt)],32)])],64)):(l(),i("div",jt,[...r[45]||(r[45]=[e("span",{class:"material-icons text-6xl text-gray-300 dark:text-gray-600 mb-4"}," chat_bubble_outline ",-1),e("h3",{class:"text-xl font-semibold text-gray-600 dark:text-gray-400 mb-2"}," Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø© Ù„Ù„Ø¨Ø¯Ø¡ ",-1),e("p",{class:"text-gray-500 dark:text-gray-500 max-w-md"}," Ø§Ø®ØªØ± Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø±Ø§Ø³Ù„Ø© Ø£Ùˆ Ø§Ø¨Ø¯Ø£ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ù…Ø³ØªÙÙŠØ¯ÙŠÙ† Ø£Ùˆ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ",-1)])]))])])])])]),t.showNewMessageModal?(l(),i("div",Dt,[e("div",Rt,[e("div",St,[r[47]||(r[47]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"}," Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© ",-1)),e("button",{onClick:r[16]||(r[16]=s=>t.showNewMessageModal=!1),class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...r[46]||(r[46]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Ut,[e("div",It,[r[49]||(r[49]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 text-right"}," Ø¥Ù„Ù‰ ",-1)),M(e("select",{"onUpdate:modelValue":r[17]||(r[17]=s=>t.newMessageRecipient=s),class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent"},[r[48]||(r[48]=e("option",{value:""},"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙ„Ù…",-1)),e("optgroup",Bt,[(l(!0),i(k,null,j(t.adminRecipients,s=>(l(),i("option",{key:s.id,value:s.id},n(s.name)+" ("+n(t.getUserRole(s.role))+") ",9,Nt))),128))]),e("optgroup",At,[(l(!0),i(k,null,j(t.userRecipients,s=>(l(),i("option",{key:s.id,value:s.id},n(s.name)+" ("+n(t.getUserRole(s.role))+") ",9,Tt))),128))])],512),[[fe,t.newMessageRecipient]])]),e("div",Lt,[r[50]||(r[50]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 text-right"}," Ø§Ù„Ø±Ø³Ø§Ù„Ø© ",-1)),M(e("textarea",{"onUpdate:modelValue":r[18]||(r[18]=s=>t.newMessageText=s),rows:"4",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-800 dark:text-white resize-none focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent",placeholder:"Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."},null,512),[[T,t.newMessageText]])]),e("div",Et,[e("label",Ft,[M(e("input",{type:"checkbox","onUpdate:modelValue":r[19]||(r[19]=s=>t.markAsImportant=s),class:"rounded text-[#1B3C53] focus:ring-[#1B3C53]"},null,512),[[pe,t.markAsImportant]]),r[51]||(r[51]=f(" ØªØ¹ÙŠÙŠÙ† ÙƒØ£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ© ",-1))]),e("div",Ot,n(t.newMessageText.length)+"/500 ",1)])]),e("div",Vt,[e("button",{onClick:r[20]||(r[20]=s=>t.showNewMessageModal=!1),class:"px-6 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-white transition-colors"}," Ø¥Ù„ØºØ§Ø¡ "),e("button",{onClick:r[21]||(r[21]=(...s)=>t.createNewConversation&&t.createNewConversation(...s)),disabled:!t.newMessageRecipient||!t.newMessageText.trim(),class:"px-6 py-2 bg-[#1B3C53] text-white rounded-xl hover:bg-[#234C6A] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2"},[...r[52]||(r[52]=[e("span",{class:"material-icons text-sm"},"send",-1),f(" Ø¥Ø±Ø³Ø§Ù„ ",-1)])],8,zt)])])])):y("",!0),t.showConversationInfo&&t.selectedConversation?(l(),i("div",Pt,[e("div",Jt,[e("div",Ht,[r[54]||(r[54]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white"}," Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ",-1)),e("button",{onClick:r[22]||(r[22]=s=>t.showConversationInfo=!1),class:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[...r[53]||(r[53]=[e("span",{class:"material-icons"},"close",-1)])])]),e("div",Kt,[e("div",Qt,[e("div",{class:d(["w-20 h-20 rounded-full flex items-center justify-center text-white text-xl font-semibold mx-auto mb-3",t.getUserColor(t.selectedConversation.participant.role)])},n(t.getInitials(t.selectedConversation.participant.name)),3),e("h4",qt,n(t.selectedConversation.participant.name),1),e("p",Gt,n(t.getUserRole(t.selectedConversation.participant.role)),1)]),e("div",Wt,[e("div",Xt,[r[55]||(r[55]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Ø¹Ø¯Ø¯ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„",-1)),e("p",Yt,n(t.selectedConversation.messages.length),1)]),e("div",Zt,[r[56]||(r[56]=e("p",{class:"text-gray-600 dark:text-gray-400"},"ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡",-1)),e("p",$t,n(t.formatMessageDate((h=t.selectedConversation.messages[0])==null?void 0:h.timestamp)),1)])]),e("div",er,[e("button",{onClick:r[23]||(r[23]=(...s)=>t.exportConversation&&t.exportConversation(...s)),class:"w-full text-center text-[#1B3C53] dark:text-blue-400 hover:underline text-sm py-2"}," ØªØµØ¯ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© ")])])])])):y("",!0)])}const sr=xe(ke,[["render",tr],["__scopeId","data-v-24e18266"]]);export{sr as default};

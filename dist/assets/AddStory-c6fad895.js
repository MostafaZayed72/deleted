import{_ as le,q as ne,u as de,r as x,c as I,o as ge,b as d,d as g,f as t,t as u,p as ue,s as S,w as f,v as P,m as k,F as B,l as ye,g as O,h as c,j as _,n as V}from"./index-85c8a86e.js";const me={name:"AddStory",setup(){const b=ne(),e=de();if(!b.name){console.error("Route name is missing");const a=JSON.parse(localStorage.getItem("userData")||"{}").role==="admin"?"/admin/stories":"/employee/stories";return e.push(a),{}}const l=x({vessel_number:"",title:"",publication_year:"",author:"",story_type:"",category:"",age_group:"",status:"draft",summary:"",cover_image:null,story_file:null,rating:0,views:0}),r=x(!1),C=x(null),F=x(null),p=x(!1),m=x(""),o=x([]),h=I(()=>(b.name==="EditStory"||b.name==="EmployeeEditStory")&&b.params.id),z=I(()=>{const i=["title","publication_year","author","story_type","category","age_group","summary"],a=i.filter(s=>{const n=l.value[s];return n&&n.toString().trim().length>0}).length;return Math.min(100,Math.round(a/i.length*100))}),E=I(()=>l.value.story_type&&l.value.story_file&&["image","video","audio"].includes(l.value.story_type)),U=i=>{try{if(i){const s=JSON.parse(localStorage.getItem("libraryStories")||"[]").find(n=>n.id===parseInt(i));if(s)l.value={...s};else{alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨"),e.push("/admin/stories");return}}else{const a=localStorage.getItem("story_draft");if(a)try{const s=JSON.parse(a);l.value={...s},alert("ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø¢Ø®Ø± Ù…Ø³ÙˆØ¯Ø© Ù…Ø­ÙÙˆØ¸Ø©")}catch(s){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø³ÙˆØ¯Ø©:",s)}}}catch(a){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰:",a),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ØªÙˆÙ‰")}},J=()=>{const i=new Date().getFullYear();for(let a=i;a>=1900;a--)o.value.push(a)},q=()=>{const i="VSL",a=Date.now().toString().slice(-6),s=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${i}-${a}-${s}`},G=i=>({published:"Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù„Ù„Ø¬Ù…Ù‡ÙˆØ±",draft:"Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø­ÙÙˆØ¸ ÙƒÙ…Ø³ÙˆØ¯Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",archived:"Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø®ÙÙŠ Ø¹Ù† Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±"})[i]||"";ge(()=>{J(),h.value?U(b.params.id):(l.value.vessel_number=q(),U())});const T=()=>{},R=()=>{const a=JSON.parse(localStorage.getItem("userData")||"{}").role==="admin"?"/admin/stories":"/employee/stories";e.push(a)},L=()=>{var i;(i=C.value)==null||i.click()},Y=()=>{var i;(i=F.value)==null||i.click()},W=async i=>{const a=i.target.files[0];if(a){if(!a.type.startsWith("image/")){alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ÙÙ‚Ø·");return}try{if(a.size>5242880){alert("Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ (5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª)");return}const n=await D(a);if(!n)throw new Error("ÙØ´Ù„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©");l.value.cover_image={name:a.name,size:a.size,type:a.type,data:n},m.value=n}catch(s){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù")}}},X=async i=>{const a=i.target.files[0];if(a){if(!A(a,l.value.story_type)){alert(`Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ØªÙˆØ§ÙÙ‚. ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ${$(l.value.story_type)}`);return}try{if(a.size>52428800){alert("Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ (50 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª)");return}const n=await D(a);if(!n)throw new Error("ÙØ´Ù„ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù„Ù");const y=new Blob([a],{type:a.type}),N=URL.createObjectURL(y);m.value=N,l.value.story_file={name:a.name,size:a.size,type:a.type,data:n},E.value&&(p.value=!0)}catch(s){console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰")}}},D=i=>new Promise((a,s)=>{const n=new FileReader;n.readAsDataURL(i),n.onload=()=>a(n.result),n.onerror=y=>s(y)}),A=(i,a)=>a?({image:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],video:["video/mp4","video/mpeg","video/ogg","video/webm","video/quicktime"],audio:["audio/mpeg","audio/wav","audio/ogg","audio/aac","audio/webm"],pdf:["application/pdf"]}[a]||[]).some(y=>i.type.includes(y)):!0,Z=()=>{l.value.cover_image=null},H=()=>{l.value.story_file=null,p.value=!1,m.value=""},K=i=>(i==null?void 0:i.name)||"Ù…Ù„Ù Ù…Ø±ÙÙˆØ¹",Q=i=>i!=null&&i.size?`${(i.size/(1024*1024)).toFixed(2)} MB`:"",$=i=>({image:"ØµÙˆØ±Ø©",video:"ÙÙŠØ¯ÙŠÙˆ",audio:"ØµÙˆØª",pdf:"PDF"})[i]||"Ù…Ù„Ù",ee=()=>({image:"image/*",video:"video/*",audio:"audio/*",pdf:".pdf"})[l.value.story_type]||"*/*",te=()=>({image:"JPEG, PNG, GIF",video:"MP4, MPEG, WebM",audio:"MP3, WAV, OGG",pdf:"PDF"})[l.value.story_type]||"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª",re=()=>{var i;if((i=l.value.story_file)!=null&&i.data)try{const a=l.value.story_file.type||"";let s=l.value.story_file.data;s.startsWith("data:")||(s=`data:${a};base64,${s}`),m.value=s,p.value=!0}catch(a){console.error("Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù:",a),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù")}},oe=()=>{p.value=!1,m.value=""},ae=()=>{l.value.status="draft",M()},M=async()=>{if(["vessel_number","title","publication_year","author","story_type","category","age_group","summary"].filter(s=>!l.value[s]).length>0){alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");return}if(!h.value){if(!l.value.cover_image){alert("ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù");return}if(!l.value.story_file){alert("ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰");return}}if(l.value.story_file)try{const s=l.value.story_file;if(!A({type:s.type||""},l.value.story_type)){alert("Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø±ÙÙˆØ¹ Ù„Ø§ ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯");return}}catch(s){console.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù");return}r.value=!0;try{await new Promise(v=>setTimeout(v,800));const s=JSON.parse(localStorage.getItem("userData")||"{}"),n=JSON.parse(localStorage.getItem("libraryStories")||"[]"),y=new Date().toISOString();if(h.value){const v=parseInt(b.params.id),w=n.findIndex(j=>j.id===v);w!==-1&&(n[w]={...n[w],...l.value,updated_at:y,reviewed_by:s.role==="admin"?s.name:n[w].reviewed_by},localStorage.setItem("libraryStories",JSON.stringify(n)),alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­ØªÙˆÙ‰ "${l.value.title}" Ø¨Ù†Ø¬Ø§Ø­!`))}else{const v={id:Date.now(),...l.value,rating:0,views:0,created_at:y,updated_at:y,added_by:s.name||"Ù…ÙˆØ¸Ù",added_by_id:s.id,status:s.role==="admin"?"published":l.value.status||"draft",submitted_at:s.role==="employee"&&l.value.status==="pending_review"?y:null,reviewed_by:s.role==="admin"?s.name:null,review_notes:null};n.unshift(v),localStorage.setItem("libraryStories",JSON.stringify(n));try{window.dispatchEvent(new Event("libraryStoriesUpdated"))}catch{}s.role==="employee"&&l.value.status==="pending_review"&&se("content_submitted",v);const w=l.value.status==="published"?"ØªÙ… Ù†Ø´Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­!":s.role==="employee"?"ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙƒÙ…Ø³ÙˆØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ø¬Ø§Ù‡Ø²Ø§Ù‹.":"ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­!";alert(w)}const ie=(s.role||"employee")==="admin"?"/admin/stories":"/employee/stories";e.push(ie);try{window.dispatchEvent(new Event("libraryStoriesUpdated"))}catch{}}catch(s){console.error("Error saving story:",s),alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ù…Ø­ØªÙˆÙ‰")}finally{r.value=!1}},se=(i,a)=>{const s=JSON.parse(localStorage.getItem("userData")||"{}"),n=JSON.parse(localStorage.getItem("adminNotifications")||"[]");n.unshift({id:Date.now(),type:i,title:"Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯ ÙŠØ­ØªØ§Ø¬ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",message:`Ù‚Ø§Ù… Ø§Ù„Ù…ÙˆØ¸Ù ${s.name} Ø¨Ø¥Ø±Ø³Ø§Ù„ Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©: "${a.title}"`,data:a,employee_id:s.id,employee_name:s.name,timestamp:new Date().toISOString(),read:!1}),localStorage.setItem("adminNotifications",JSON.stringify(n))};return{form:l,loading:r,isEditing:h,progressPercentage:z,publicationYears:o,coverInput:C,storyFileInput:F,showPreview:p,previewUrl:m,canPreview:E,handleCoverImageClick:L,handleStoryFileClick:Y,handleCoverImageUpload:W,handleStoryFileUpload:X,removeCoverImage:Z,removeStoryFile:H,saveAsDraft:ae,submitForm:M,goBack:R,previewFile:re,closePreview:oe,getFileName:K,getFileSize:Q,getFileAcceptTypes:ee,getFileAcceptDescription:te,getStatusDescription:G,updateProgress:T}}},ce={dir:"rtl",class:"min-h-screen bg-gradient-to-br from-blue-50 to-emerald-50 dark:from-gray-900 dark:to-gray-800 py-8"},pe={class:"container mx-auto px-4 py-8 max-w-4xl"},fe={class:"text-center mb-8"},be={class:"text-3xl font-bold text-gray-800 dark:text-white mb-3"},ve={class:"text-lg text-gray-600 dark:text-gray-300"},xe={class:"mb-8"},we={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-4 border border-gray-200 dark:border-gray-700"},ke={class:"flex items-center justify-between mb-3"},_e={class:"text-xl font-bold text-[#1B3C53] dark:text-blue-400"},he={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5"},Se={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700"},Ce={class:"bg-gradient-to-r from-[#1B3C53] to-[#234C6A] p-6 text-white"},Fe={class:"flex items-center justify-between"},Ie={class:"flex items-center gap-3"},Pe={class:"text-xl font-bold"},Be={class:"text-blue-100 text-sm"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},De=["value"],Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Me={class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},je={class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3"},Oe={key:0,class:"text-red-500"},Ve={key:1,class:"relative w-full h-full"},ze=["src"],Je={class:"absolute inset-0 bg-black bg-opacity-30 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"},qe={class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-3"},Ge={key:0,class:"text-red-500"},Te={class:"text-xs text-gray-500 mt-1"},Re={key:1,class:"w-full"},Le={class:"flex items-center gap-3 mb-2"},Ye={class:"flex-1 text-right"},We={class:"font-medium text-gray-800 dark:text-white text-sm"},Xe={class:"text-xs text-gray-600 dark:text-gray-400"},Ze={class:"flex gap-2 justify-center"},He=["accept"],Ke={key:0,class:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},Qe={class:"flex justify-between items-center mb-3"},$e={key:0,class:"flex justify-center"},et=["src"],tt={key:1,class:"flex justify-center"},rt={controls:"",class:"max-h-60 rounded-lg"},ot=["src","type"],at={key:2,class:"flex justify-center"},st={controls:"",class:"w-full"},it=["src","type"],lt={key:3,class:"text-center py-4"},nt={class:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700"},dt={class:"flex items-center gap-3"},gt=["disabled"],ut={class:"material-icons"};function yt(b,e,l,r,C,F){var p,m;return d(),g("div",ce,[t("main",pe,[t("div",fe,[t("h1",be,u(r.isEditing?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰":"Ø¥Ø¶Ø§ÙØ© Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯"),1),t("p",ve,u(r.isEditing?"Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©":"Ø£Ø¶Ù Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯Ø§Ù‹ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ©"),1)]),t("div",xe,[t("div",we,[t("div",ke,[e[26]||(e[26]=t("h2",{class:"text-lg font-bold text-gray-800 dark:text-white"},"ØªÙ‚Ø¯Ù… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬",-1)),t("span",_e,u(r.progressPercentage)+"%",1)]),t("div",he,[t("div",{class:"bg-gradient-to-r from-[#1B3C53] to-[#234C6A] h-2.5 rounded-full transition-all duration-500 ease-out",style:ue({width:r.progressPercentage+"%"})},null,4)])])]),t("div",Se,[t("div",Ce,[t("div",Fe,[t("div",Ie,[e[27]||(e[27]=t("span",{class:"material-icons text-3xl"},"library_add",-1)),t("div",null,[t("h2",Pe,u(r.isEditing?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰":"Ù…Ø­ØªÙˆÙ‰ Ø¬Ø¯ÙŠØ¯"),1),t("p",Be,"Ø±Ù‚Ù… Ø§Ù„ÙˆØ¹Ø§Ø¡: "+u(r.form.vessel_number),1)])]),e[28]||(e[28]=t("div",{class:"flex items-center gap-2 bg-white/20 rounded-xl px-3 py-1"},[t("span",{class:"material-icons text-sm"},"auto_awesome"),t("span",{class:"font-medium text-sm"},"Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ©")],-1))])]),t("form",{onSubmit:e[25]||(e[25]=S((...o)=>r.submitForm&&r.submitForm(...o),["prevent"])),class:"p-6 space-y-6"},[t("div",Ee,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ * ",-1)),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>r.form.title=o),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…Ø­ØªÙˆÙ‰",onInput:e[1]||(e[1]=(...o)=>r.updateProgress&&r.updateProgress(...o))},null,544),[[P,r.form.title]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ø§Ù„Ù…Ø¤Ù„Ù * ",-1)),f(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.form.author=o),type:"text",required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200",placeholder:"Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ù„Ù",onInput:e[3]||(e[3]=(...o)=>r.updateProgress&&r.updateProgress(...o))},null,544),[[P,r.form.author]])])]),t("div",Ue,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø± * ",-1)),f(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.form.publication_year=o),required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200",onChange:e[5]||(e[5]=(...o)=>r.updateProgress&&r.updateProgress(...o))},[e[31]||(e[31]=t("option",{value:""},"Ø§Ø®ØªØ± Ø§Ù„Ø³Ù†Ø©",-1)),(d(!0),g(B,null,ye(r.publicationYears,o=>(d(),g("option",{key:o,value:o},u(o),9,De))),128))],544),[[k,r.form.publication_year]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," ÙØ¦Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ * ",-1)),f(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>r.form.category=o),required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200",onChange:e[7]||(e[7]=(...o)=>r.updateProgress&&r.updateProgress(...o))},[...e[33]||(e[33]=[O('<option value="" data-v-c8080593>Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option><option value="ÙˆØ§Ù‚Ø¹ÙŠØ©" data-v-c8080593>ğŸŒ ÙˆØ§Ù‚Ø¹ÙŠØ©</option><option value="Ø®ÙŠØ§Ù„" data-v-c8080593>âœ¨ Ø®ÙŠØ§Ù„</option><option value="Ø¯ÙŠÙ†ÙŠ" data-v-c8080593>ğŸ•Œ Ø¯ÙŠÙ†ÙŠ</option><option value="ØªØ¹Ù„ÙŠÙ…ÙŠ" data-v-c8080593>ğŸ“š ØªØ¹Ù„ÙŠÙ…ÙŠ</option><option value="ØªØ±ÙÙŠÙ‡ÙŠ" data-v-c8080593>ğŸ­ ØªØ±ÙÙŠÙ‡ÙŠ</option><option value="ØªØ§Ø±ÙŠØ®ÙŠ" data-v-c8080593>ğŸ›ï¸ ØªØ§Ø±ÙŠØ®ÙŠ</option><option value="Ø¹Ù„Ù…ÙŠ" data-v-c8080593>ğŸ”¬ Ø¹Ù„Ù…ÙŠ</option><option value="Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ" data-v-c8080593>ğŸ‘¥ Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ</option>',9)])],544),[[k,r.form.category]])]),t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù…Ø±ÙŠØ© * ",-1)),f(t("select",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.form.age_group=o),required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200",onChange:e[9]||(e[9]=(...o)=>r.updateProgress&&r.updateProgress(...o))},[...e[35]||(e[35]=[t("option",{value:""},"Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©",-1),t("option",{value:"3-6 Ø³Ù†ÙˆØ§Øª"},"ğŸ‘¶ 3-6 Ø³Ù†ÙˆØ§Øª",-1),t("option",{value:"7-9 Ø³Ù†ÙˆØ§Øª"},"ğŸ§’ 7-9 Ø³Ù†ÙˆØ§Øª",-1),t("option",{value:"10-12 Ø³Ù†Ø©"},"ğŸ‘¦ 10-12 Ø³Ù†Ø©",-1)])],544),[[k,r.form.age_group]])])]),t("div",Ae,[t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù * ",-1)),f(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>r.form.story_type=o),required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200",onChange:e[11]||(e[11]=(...o)=>r.updateProgress&&r.updateProgress(...o))},[...e[37]||(e[37]=[O('<option value="" data-v-c8080593>Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option><option value="image" data-v-c8080593>ğŸ“· ØµÙˆØ±Ø©</option><option value="video" data-v-c8080593>ğŸ¬ ÙÙŠØ¯ÙŠÙˆ</option><option value="audio" data-v-c8080593>ğŸµ ØµÙˆØª</option><option value="pdf" data-v-c8080593>ğŸ“„ PDF</option>',5)])],544),[[k,r.form.story_type]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ * ",-1)),f(t("select",{"onUpdate:modelValue":e[12]||(e[12]=o=>r.form.status=o),required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200"},[...e[39]||(e[39]=[t("option",{value:"published"},"ğŸŒ Ù…Ù†Ø´ÙˆØ±",-1),t("option",{value:"draft"},"ğŸ“ Ù…Ø³ÙˆØ¯Ø©",-1),t("option",{value:"archived"},"ğŸ“ Ù…Ø¤Ø±Ø´Ù",-1)])],512),[[k,r.form.status]]),t("p",Me,u(r.getStatusDescription(r.form.status)),1)])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2"}," Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ * ",-1)),f(t("textarea",{"onUpdate:modelValue":e[13]||(e[13]=o=>r.form.summary=o),rows:"3",required:"",class:"w-full px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-[#1B3C53] bg-white dark:bg-gray-700 dark:text-white transition-all duration-200 resize-none",placeholder:"Ø£Ø¯Ø®Ù„ Ù…Ù„Ø®ØµØ§Ù‹ Ù…Ø®ØªØµØ±Ø§Ù‹ Ù„Ù„Ù…Ø­ØªÙˆÙ‰...",onInput:e[14]||(e[14]=(...o)=>r.updateProgress&&r.updateProgress(...o))},null,544),[[P,r.form.summary]])]),t("div",Ne,[t("div",null,[t("label",je,[e[42]||(e[42]=c(" ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù ",-1)),r.isEditing?_("",!0):(d(),g("span",Oe,"*"))]),t("div",{onClick:e[17]||(e[17]=(...o)=>r.handleCoverImageClick&&r.handleCoverImageClick(...o)),class:V(["border-3 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center cursor-pointer transition-all duration-300 hover:border-[#1B3C53] hover:bg-blue-50 dark:hover:bg-gray-700 h-40 flex flex-col items-center justify-center",{"border-green-500 bg-green-50 dark:bg-green-900/20":r.form.cover_image}])},[r.form.cover_image?(d(),g("div",Ve,[t("img",{src:r.form.cover_image,alt:"ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù",class:"w-full h-full object-cover rounded-lg"},null,8,ze),t("div",Je,[t("button",{type:"button",onClick:e[15]||(e[15]=S((...o)=>r.removeCoverImage&&r.removeCoverImage(...o),["stop"])),class:"bg-red-500 text-white p-2 rounded-full"},[...e[46]||(e[46]=[t("span",{class:"material-icons text-sm"},"delete",-1)])])])])):(d(),g(B,{key:0},[e[43]||(e[43]=t("span",{class:"material-icons text-4xl text-gray-400 mb-2"},"image",-1)),e[44]||(e[44]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ø§Ù",-1)),e[45]||(e[45]=t("p",{class:"text-xs text-gray-500 mt-1"},"PNG, JPG, JPEG",-1))],64)),t("input",{ref:"coverInput",type:"file",accept:"image/*",onChange:e[16]||(e[16]=(...o)=>r.handleCoverImageUpload&&r.handleCoverImageUpload(...o)),class:"hidden"},null,544)],2)]),t("div",null,[t("label",qe,[e[47]||(e[47]=c(" Ù…Ù„Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ",-1)),r.isEditing?_("",!0):(d(),g("span",Ge,"*"))]),t("div",{onClick:e[21]||(e[21]=(...o)=>r.handleStoryFileClick&&r.handleStoryFileClick(...o)),class:V(["border-3 border-dashed border-gray-300 dark:border-gray-600 rounded-xl p-6 text-center cursor-pointer transition-all duration-300 hover:border-[#1B3C53] hover:bg-blue-50 dark:hover:bg-gray-700 h-40 flex flex-col items-center justify-center",{"border-blue-500 bg-blue-50 dark:bg-blue-900/20":r.form.story_file}])},[r.form.story_file?(d(),g("div",Re,[t("div",Le,[e[50]||(e[50]=t("span",{class:"material-icons text-3xl text-blue-600"},"description",-1)),t("div",Ye,[t("p",We,u(r.getFileName(r.form.story_file)),1),t("p",Xe,u(r.getFileSize(r.form.story_file)),1)])]),t("div",Ze,[t("button",{type:"button",onClick:e[18]||(e[18]=S((...o)=>r.removeStoryFile&&r.removeStoryFile(...o),["stop"])),class:"px-3 py-1 bg-red-500 text-white text-xs rounded-lg flex items-center gap-1"},[...e[51]||(e[51]=[t("span",{class:"material-icons text-xs"},"delete",-1),c(" Ø­Ø°Ù ",-1)])]),r.canPreview?(d(),g("button",{key:0,type:"button",onClick:e[19]||(e[19]=S((...o)=>r.previewFile&&r.previewFile(...o),["stop"])),class:"px-3 py-1 bg-green-500 text-white text-xs rounded-lg flex items-center gap-1"},[...e[52]||(e[52]=[t("span",{class:"material-icons text-xs"},"visibility",-1),c(" Ù…Ø¹Ø§ÙŠÙ†Ø© ",-1)])])):_("",!0)])])):(d(),g(B,{key:0},[e[48]||(e[48]=t("span",{class:"material-icons text-4xl text-gray-400 mb-2"},"attach_file",-1)),e[49]||(e[49]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Ø§Ù†Ù‚Ø± Ù„Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ù…Ø­ØªÙˆÙ‰",-1)),t("p",Te,u(r.getFileAcceptDescription()),1)],64)),t("input",{ref:"storyFileInput",type:"file",accept:r.getFileAcceptTypes(),onChange:e[20]||(e[20]=(...o)=>r.handleStoryFileUpload&&r.handleStoryFileUpload(...o)),class:"hidden"},null,40,He)],2),r.showPreview&&r.previewUrl?(d(),g("div",Ke,[t("div",Qe,[e[54]||(e[54]=t("h4",{class:"font-medium text-gray-800 dark:text-white"},"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù",-1)),t("button",{onClick:e[22]||(e[22]=(...o)=>r.closePreview&&r.closePreview(...o)),class:"text-red-500"},[...e[53]||(e[53]=[t("span",{class:"material-icons"},"close",-1)])])]),r.form.story_type==="image"?(d(),g("div",$e,[t("img",{src:r.previewUrl,class:"max-h-60 rounded-lg"},null,8,et)])):r.form.story_type==="video"?(d(),g("div",tt,[t("video",rt,[t("source",{src:r.previewUrl,type:(p=r.form.story_file)==null?void 0:p.type},null,8,ot),e[55]||(e[55]=c(" Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ",-1))])])):r.form.story_type==="audio"?(d(),g("div",at,[t("audio",st,[t("source",{src:r.previewUrl,type:(m=r.form.story_file)==null?void 0:m.type},null,8,it),e[56]||(e[56]=c(" Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª ",-1))])])):r.form.story_type==="pdf"?(d(),g("div",lt,[...e[57]||(e[57]=[t("span",{class:"material-icons text-6xl text-red-500"},"picture_as_pdf",-1),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Ù…Ù„Ù PDF - ÙŠÙ…ÙƒÙ† Ù…Ø¹Ø§ÙŠÙ†ØªÙ‡ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„",-1)])])):_("",!0)])):_("",!0)])]),t("div",nt,[t("button",{type:"button",onClick:e[23]||(e[23]=(...o)=>r.goBack&&r.goBack(...o)),class:"flex items-center gap-2 px-6 py-3 border-2 border-gray-300 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200 font-medium"},[...e[58]||(e[58]=[t("span",{class:"material-icons"},"arrow_back",-1),c(" Ø±Ø¬ÙˆØ¹ ",-1)])]),t("div",dt,[t("button",{type:"button",onClick:e[24]||(e[24]=(...o)=>r.saveAsDraft&&r.saveAsDraft(...o)),class:"flex items-center gap-2 px-6 py-3 border-2 border-[#1B3C53] text-[#1B3C53] dark:text-white rounded-xl hover:bg-[#1B3C53] hover:text-white transition-all duration-200 font-medium"},[...e[59]||(e[59]=[t("span",{class:"material-icons"},"save",-1),c(" Ø­ÙØ¸ Ù…Ø³ÙˆØ¯Ø© ",-1)])]),t("button",{type:"submit",disabled:r.loading,class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-[#1B3C53] to-[#234C6A] text-white rounded-xl hover:from-[#234C6A] hover:to-[#1B3C53] disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg"},[t("span",ut,u(r.loading?"autorenew":"publish"),1),c(" "+u(r.loading?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":r.isEditing?"ØªØ­Ø¯ÙŠØ«":"Ù†Ø´Ø±"),1)],8,gt)])])],32)])])])}const ct=le(me,[["render",yt],["__scopeId","data-v-c8080593"]]);export{ct as default};

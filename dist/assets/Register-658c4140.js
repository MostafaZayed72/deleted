import{_ as E,u as P,r as u,o as V,a as M,b as f,d as p,f as t,g as R,s as O,w as d,v as y,x as w,t as b,m as j,y as L,h as k,j as J,e as q,k as H}from"./index-85c8a86e.js";const _={name:"Register",setup(){const m=P(),e=u(!1),v=u(!1),r=u(!1),i=u(""),l=u({fullName:"",email:"",password:"",confirmPassword:"",accountType:"parent",phone:"",agreeTerms:!1}),g=()=>{try{return JSON.parse(localStorage.getItem("libraryUsers")||"[]")}catch(o){return console.error("Error loading users:",o),[]}},a=()=>{try{return JSON.parse(localStorage.getItem("libraryEmployees")||"[]")}catch(o){return console.error("Error loading employees:",o),[]}},h=o=>{const s=g();s.push(o),localStorage.setItem("libraryUsers",JSON.stringify(s)),C(o)},C=o=>{const s=a(),n=JSON.parse(localStorage.getItem("userData")||"{}");if(n.role==="employee"){const N=s.map(x=>{if(x.id===n.id){const c=x.stats||{totalUsers:0,parents:0,teachers:0,students:0};return c.totalUsers++,c[`${o.role}s`]++,{...x,stats:c,lastActivity:new Date().toISOString()}}return x});localStorage.setItem("libraryEmployees",JSON.stringify(N))}},S=()=>l.value.password.length<6?(i.value="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",!1):l.value.password!==l.value.confirmPassword?(i.value="ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©",!1):l.value.agreeTerms?g().find(n=>n.email===l.value.email)?(i.value="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø³Ø¬Ù„ Ù…Ø³Ø¨Ù‚Ø§Ù‹",!1):(i.value="",!0):(i.value="ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…",!1),B=()=>{const o=localStorage.getItem("redirectAfterLogin");return o?(localStorage.removeItem("redirectAfterLogin"),o):null},T=()=>{const o=new StorageEvent("storage",{key:"authToken",newValue:localStorage.getItem("authToken"),oldValue:null,url:window.location.href,storageArea:localStorage});window.dispatchEvent(o),window.opener&&window.opener.postMessage({type:"AUTH_CHANGE",authenticated:!0},"*"),window.postMessage({type:"AUTH_CHANGE",authenticated:!0},"*");const s=localStorage.getItem("authToken");localStorage.setItem("authToken",s)},A=o=>{const s=`user-token-${Date.now()}`;localStorage.setItem("authToken",s),localStorage.setItem("userData",JSON.stringify({id:o.id,name:o.name,email:o.email,role:o.role,avatar:o.avatar,isAdmin:!1,type:o.role,phone:o.phone||""})),localStorage.setItem("userType",o.role),localStorage.setItem("lastActivity",new Date().getTime().toString()),console.log("âœ… ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:",o),T()},U=async()=>{if(S()){e.value=!0;try{await new Promise(n=>setTimeout(n,1500));const o={id:Date.now(),name:l.value.fullName,email:l.value.email,password:l.value.password,role:l.value.accountType,phone:l.value.phone||null,avatar:l.value.fullName.charAt(0),isActive:!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),preferences:{language:"ar",theme:"light",notifications:!0},stats:{storiesRead:0,favorites:0,readingTime:0}};h(o),A(o);const s=B();s?m.replace(s):(alert("ğŸ‰ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!"),m.push("/"))}catch(o){console.error("âŒ Register error:",o),i.value="Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰."}finally{e.value=!1}}},I=()=>{m.push("/login")};return V(()=>{const o=a(),s=g();console.log("ğŸ‘¥ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:",{totalUsers:s.length,parents:s.filter(n=>n.role==="parent").length,teachers:s.filter(n=>n.role==="teacher").length,students:s.filter(n=>n.role==="student").length,employees:o.length})}),{form:l,loading:e,showPassword:v,showConfirmPassword:r,errorMessage:i,handleRegister:U,goToLogin:I}}},D={class:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4"},G={class:"max-w-md w-full"},F={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-8"},z={class:"relative"},K={class:"relative"},Q={class:"relative"},W=["type"],X={class:"material-icons text-lg"},Y={class:"relative"},Z=["type"],$={class:"material-icons text-lg"},ee={class:"relative"},te={class:"relative"},re={class:"flex items-start gap-3"},oe={key:0,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 px-4 py-3 rounded-xl text-sm"},ae=["disabled"],se={key:0,class:"flex items-center justify-center gap-2"},le={key:1,class:"flex items-center justify-center gap-2"},ne={class:"text-center"},ie={class:"text-center mt-6"};function de(m,e,v,r,i,l){const g=M("router-link");return f(),p("div",D,[t("div",G,[t("div",F,[e[31]||(e[31]=R('<div class="text-center mb-8" data-v-b4a3eb62><div class="w-16 h-16 rounded-2xl flex items-center justify-center bg-gradient-to-br from-[#1B3C53] to-[#234C6A] mx-auto mb-4 shadow-lg" data-v-b4a3eb62><span class="material-icons text-white text-2xl" data-v-b4a3eb62>person_add</span></div><h2 class="text-2xl font-bold text-[#1B3C53] dark:text-white mb-2" data-v-b4a3eb62>Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯</h2><p class="text-[#456882] dark:text-gray-300" data-v-b4a3eb62>Ù…Ø±ÙƒØ² ØµØ§Ù„Ø­ Ø¨Ù† ØµØ§Ù„Ø­ - Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</p></div>',1)),t("form",{onSubmit:e[9]||(e[9]=O((...a)=>r.handleRegister&&r.handleRegister(...a),["prevent"])),class:"space-y-6"},[t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium mb-2 text-[#1B3C53] dark:text-gray-300"},"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",-1)),t("div",z,[e[11]||(e[11]=t("span",{class:"material-icons absolute right-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 text-lg"},"person",-1)),d(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>r.form.fullName=a),required:"",placeholder:"Ø§Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„",class:"w-full px-4 py-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white transition-all duration-200"},null,512),[[y,r.form.fullName]])])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium mb-2 text-[#1B3C53] dark:text-gray-300"},"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",-1)),t("div",K,[e[13]||(e[13]=t("span",{class:"material-icons absolute right-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 text-lg"},"email",-1)),d(t("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=a=>r.form.email=a),required:"",placeholder:"Ø§Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",class:"w-full px-4 py-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white transition-all duration-200"},null,512),[[y,r.form.email]])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium mb-2 text-[#1B3C53] dark:text-gray-300"},"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",-1)),t("div",Q,[e[15]||(e[15]=t("span",{class:"material-icons absolute right-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 text-lg"},"lock",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.form.password=a),type:r.showPassword?"text":"password",required:"",placeholder:"Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©",class:"w-full px-4 py-3 pr-20 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white transition-all duration-200"},null,8,W),[[w,r.form.password]]),t("button",{type:"button",onClick:e[3]||(e[3]=a=>r.showPassword=!r.showPassword),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 hover:text-[#1B3C53] dark:hover:text-white transition-colors duration-200"},[t("span",X,b(r.showPassword?"visibility_off":"visibility"),1)])]),e[17]||(e[17]=t("p",{class:"text-xs mt-2 text-[#456882] dark:text-gray-400"},"ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„",-1))]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium mb-2 text-[#1B3C53] dark:text-gray-300"},"ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",-1)),t("div",Y,[e[18]||(e[18]=t("span",{class:"material-icons absolute right-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 text-lg"},"lock",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.form.confirmPassword=a),type:r.showConfirmPassword?"text":"password",required:"",placeholder:"Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",class:"w-full px-4 py-3 pr-20 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white transition-all duration-200"},null,8,Z),[[w,r.form.confirmPassword]]),t("button",{type:"button",onClick:e[5]||(e[5]=a=>r.showConfirmPassword=!r.showConfirmPassword),class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 hover:text-[#1B3C53] dark:hover:text-white transition-colors duration-200"},[t("span",$,b(r.showConfirmPassword?"visibility_off":"visibility"),1)])])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium mb-2 text-[#1B3C53] dark:text-gray-300"},"Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨",-1)),t("div",ee,[e[21]||(e[21]=t("span",{class:"material-icons absolute right-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 text-lg"},"person_outline",-1)),d(t("select",{"onUpdate:modelValue":e[6]||(e[6]=a=>r.form.accountType=a),class:"w-full px-4 py-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white appearance-none transition-all duration-200"},[...e[20]||(e[20]=[t("option",{value:"parent"},"ÙˆÙ„ÙŠ Ø£Ù…Ø±",-1),t("option",{value:"teacher"},"Ù…Ø¹Ù„Ù…",-1),t("option",{value:"student"},"Ø·Ø§Ù„Ø¨",-1)])],512),[[j,r.form.accountType]])]),e[23]||(e[23]=t("p",{class:"text-xs mt-2 text-[#456882] dark:text-gray-400"},"Ù…Ù„Ø§Ø­Ø¸Ø©: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ø§Øª Ù…Ø¯ÙŠØ± Ø£Ùˆ Ù…ÙˆØ¸Ù Ù…Ù† Ù‡Ù†Ø§",-1))]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium mb-2 text-[#1B3C53] dark:text-gray-300"},"Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",-1)),t("div",te,[e[24]||(e[24]=t("span",{class:"material-icons absolute right-3 top-1/2 transform -translate-y-1/2 text-[#456882] dark:text-gray-400 text-lg"},"phone",-1)),d(t("input",{type:"tel","onUpdate:modelValue":e[7]||(e[7]=a=>r.form.phone=a),placeholder:"Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ",class:"w-full px-4 py-3 pr-10 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-[#1B3C53] focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white transition-all duration-200"},null,512),[[y,r.form.phone]])])]),t("div",re,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=a=>r.form.agreeTerms=a),required:"",class:"mt-1 rounded border-gray-300 dark:border-gray-600 focus:ring-[#1B3C53] bg-white dark:bg-gray-700"},null,512),[[L,r.form.agreeTerms]]),e[26]||(e[26]=t("label",{class:"text-sm text-[#1B3C53] dark:text-gray-300 flex-1"},[k(" Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ "),t("a",{href:"#",class:"font-medium text-[#1B3C53] dark:text-blue-400 hover:underline transition-colors duration-200"},"Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…"),k(" Ùˆ "),t("a",{href:"#",class:"font-medium text-[#1B3C53] dark:text-blue-400 hover:underline transition-colors duration-200"},"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©")],-1))]),r.errorMessage?(f(),p("div",oe,b(r.errorMessage),1)):J("",!0),t("button",{type:"submit",disabled:r.loading||!r.form.agreeTerms,class:"w-full bg-gradient-to-r from-[#1B3C53] to-[#234C6A] text-white py-3 px-4 rounded-xl hover:from-[#234C6A] hover:to-[#1B3C53] transition-all duration-200 font-semibold disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center justify-center gap-2"},[r.loading?(f(),p("span",se,[...e[27]||(e[27]=[t("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1),t("span",null,"Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...",-1)])])):(f(),p("span",le,[...e[28]||(e[28]=[t("span",{class:"material-icons text-lg"},"person_add",-1),t("span",null,"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",-1)])]))],8,ae)],32),e[32]||(e[32]=t("div",{class:"flex items-center my-6"},[t("div",{class:"flex-1 border-t border-gray-300 dark:border-gray-600"}),t("span",{class:"px-4 text-sm text-[#456882] dark:text-gray-400"},"Ø£Ùˆ"),t("div",{class:"flex-1 border-t border-gray-300 dark:border-gray-600"})],-1)),t("div",ne,[e[30]||(e[30]=t("p",{class:"text-[#1B3C53] dark:text-gray-300"},"Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ",-1)),t("button",{onClick:e[10]||(e[10]=(...a)=>r.goToLogin&&r.goToLogin(...a)),class:"font-semibold mt-2 text-[#1B3C53] dark:text-blue-400 hover:underline transition-colors duration-200 flex items-center justify-center gap-2 mx-auto"},[...e[29]||(e[29]=[t("span",{class:"material-icons text-lg"},"login",-1),t("span",null,"Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¢Ù†",-1)])])])]),t("div",ie,[q(g,{to:"/",class:"inline-flex items-center gap-2 text-[#1B3C53] dark:text-gray-300 hover:text-[#234C6A] dark:hover:text-white transition-colors duration-200"},{default:H(()=>[...e[33]||(e[33]=[t("span",{class:"material-icons"},"arrow_back",-1),t("span",null,"Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",-1)])]),_:1})])])])}const ue=E(_,[["render",de],["__scopeId","data-v-b4a3eb62"]]);export{ue as default};

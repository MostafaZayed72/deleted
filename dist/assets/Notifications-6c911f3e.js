import{_ as S,u as I,r as k,c as u,o as B,b as l,d,f as r,h,j as x,n as g,t as i,F as D,l as R}from"./index-85c8a86e.js";const M={name:"Notifications",setup(){I();const s=k([]),t=k("all"),y=()=>{const a=JSON.parse(localStorage.getItem("userData")||"{}"),n=a.role==="admin"?"adminNotifications":a.role==="employee"?"employeeNotifications":"userNotifications";s.value=JSON.parse(localStorage.getItem(n)||"[]")},e=()=>{const a=JSON.parse(localStorage.getItem("userData")||"{}"),n=a.role==="admin"?"adminNotifications":a.role==="employee"?"employeeNotifications":"userNotifications";localStorage.setItem(n,JSON.stringify(s.value))},_=u(()=>{switch(t.value){case"unread":return s.value.filter(a=>!a.read);case"read":return s.value.filter(a=>a.read);default:return s.value}}),m=u(()=>s.value.filter(a=>!a.read).length),o=u(()=>s.value.filter(a=>a.read).length),f=u(()=>m.value>0),p=a=>({content_submitted:{icon:"rate_review",bgClass:"bg-purple-500"},content_reviewed:{icon:"assignment_turned_in",bgClass:"bg-green-500"},new_content:{icon:"auto_stories",bgClass:"bg-blue-500"},comment_reply:{icon:"chat",bgClass:"bg-orange-500"},comment_like:{icon:"favorite",bgClass:"bg-red-500"},message:{icon:"mail",bgClass:"bg-indigo-500"}})[a]||{icon:"notifications",bgClass:"bg-gray-500"},C=a=>{const n=new Date(a),c=new Date-n;return c<864e5?c<36e5?"منذ "+Math.floor(c/6e4)+" دقيقة":"منذ "+Math.floor(c/36e5)+" ساعة":c<6048e5?"منذ "+Math.floor(c/864e5)+" يوم":n.toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"})},N=a=>{a.read=!0,e()},w=()=>{s.value.forEach(a=>{a.read=!0}),e()},A=a=>{const n=s.value.findIndex(b=>b.id===a.id);n!==-1&&(s.value.splice(n,1),e())},F=()=>{confirm("هل أنت متأكد من حذف جميع الإشعارات؟")&&(s.value=[],e())};return B(()=>{y()}),{notifications:s,currentFilter:t,filteredNotifications:_,unreadCount:m,readCount:o,hasUnread:f,getNotificationIcon:p,formatDate:C,markAsRead:N,markAllAsRead:w,deleteNotification:A,clearAll:F}}},J={class:"container mx-auto px-4 py-8"},O={class:"max-w-4xl mx-auto"},U={class:"flex justify-between items-center mb-6"},j={class:"flex items-center gap-2"},V={class:"flex flex-wrap gap-2 mb-6"},E={class:"space-y-4"},K={class:"flex items-start gap-4"},L={class:"material-icons text-white"},z={class:"flex-1"},T={class:"font-medium text-gray-900 dark:text-white text-lg"},q={class:"text-gray-600 dark:text-gray-300 mt-1"},G={class:"flex items-center gap-4 mt-3"},H={class:"text-sm text-gray-500 dark:text-gray-400"},P={class:"flex items-center gap-2"},Q=["onClick"],W=["onClick"],X={key:1,class:"p-8 text-center"},Y={class:"text-xl font-medium text-gray-800 dark:text-white mb-2"};function Z(s,t,y,e,_,m){return l(),d("div",J,[t[10]||(t[10]=r("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"},null,-1)),r("div",O,[r("div",U,[t[7]||(t[7]=r("h1",{class:"text-2xl font-bold text-gray-800 dark:text-white"}," الإشعارات ",-1)),r("div",j,[e.hasUnread?(l(),d("button",{key:0,onClick:t[0]||(t[0]=(...o)=>e.markAllAsRead&&e.markAllAsRead(...o)),class:"flex items-center gap-2 px-4 py-2 text-[#1B3C53] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...t[5]||(t[5]=[r("span",{class:"material-icons"},"mark_email_read",-1),h(" تحديد الكل كمقروء ",-1)])])):x("",!0),e.notifications.length>0?(l(),d("button",{key:1,onClick:t[1]||(t[1]=(...o)=>e.clearAll&&e.clearAll(...o)),class:"flex items-center gap-2 px-4 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"},[...t[6]||(t[6]=[r("span",{class:"material-icons"},"delete_sweep",-1),h(" حذف الكل ",-1)])])):x("",!0)])]),r("div",V,[r("button",{onClick:t[2]||(t[2]=o=>e.currentFilter="all"),class:g(["px-4 py-2 rounded-lg transition-colors",e.currentFilter==="all"?"bg-[#1B3C53] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"])}," الكل ("+i(e.notifications.length)+") ",3),r("button",{onClick:t[3]||(t[3]=o=>e.currentFilter="unread"),class:g(["px-4 py-2 rounded-lg transition-colors",e.currentFilter==="unread"?"bg-[#1B3C53] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"])}," غير مقروء ("+i(e.unreadCount)+") ",3),r("button",{onClick:t[4]||(t[4]=o=>e.currentFilter="read"),class:g(["px-4 py-2 rounded-lg transition-colors",e.currentFilter==="read"?"bg-[#1B3C53] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"])}," مقروء ("+i(e.readCount)+") ",3)]),r("div",E,[e.filteredNotifications.length>0?(l(!0),d(D,{key:0},R(e.filteredNotifications,o=>(l(),d("div",{key:o.id,class:g(["p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 transition-all duration-200",o.read?"":"shadow-md"])},[r("div",K,[r("div",{class:g(["w-10 h-10 rounded-full flex items-center justify-center",e.getNotificationIcon(o.type).bgClass])},[r("i",L,i(e.getNotificationIcon(o.type).icon),1)],2),r("div",z,[r("h3",T,i(o.title),1),r("p",q,i(o.message),1),r("div",G,[r("span",H,i(e.formatDate(o.timestamp)),1),r("div",P,[o.read?x("",!0):(l(),d("button",{key:0,onClick:f=>e.markAsRead(o),class:"text-[#1B3C53] dark:text-blue-400 hover:underline text-sm"}," تحديد كمقروء ",8,Q)),r("button",{onClick:f=>e.deleteNotification(o),class:"text-red-500 hover:underline text-sm"}," حذف ",8,W)])])])])],2))),128)):(l(),d("div",X,[t[8]||(t[8]=r("span",{class:"material-icons text-gray-400 dark:text-gray-600 text-6xl mb-4"}," notifications_off ",-1)),r("h3",Y," لا توجد إشعارات "+i(e.currentFilter==="unread"?"غير مقروءة":e.currentFilter==="read"?"مقروءة":""),1),t[9]||(t[9]=r("p",{class:"text-gray-600 dark:text-gray-400"}," ستظهر هنا جميع التحديثات والإشعارات المهمة ",-1))]))])])])}const ee=S(M,[["render",Z],["__scopeId","data-v-0b480715"]]);export{ee as default};

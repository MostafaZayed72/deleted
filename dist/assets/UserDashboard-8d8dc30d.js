import{_ as E,u as L,r as v,c as _,o as M,z as N,a as B,b as d,d as c,e as F,f as t,t as n,h as V,F as b,l as p,S,n as O}from"./index-85c8a86e.js";const P={name:"UserDashboard",setup(){const f=L(),e=v({}),g=v([]),r=v([]),k=()=>{window.addEventListener("interactionsUpdated",x)},x=()=>{console.log("ğŸ”„ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...");const s=JSON.parse(localStorage.getItem("userData")||"{}");s&&s.id?(e.value=S.getUserStatistics(s.id),console.log("ğŸ“Š [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",e.value),h(s.id)):(console.warn("âš ï¸ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø³ØªØ®Ø¯Ù…"),e.value={},g.value=[])},h=s=>{try{const o=S.getUserInteractions(s);r.value=o,g.value=o.sort((i,l)=>new Date(l.timestamp)-new Date(i.timestamp)).slice(0,10),console.log("ğŸ“ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] Ø¹Ø¯Ø¯ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª:",o.length)}catch(o){console.error("âŒ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª:",o),r.value=[],g.value=[]}},a=()=>{console.log("ğŸ”„ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."),x()},u=s=>({view:"visibility",like:"favorite",download:"download",share:"share",comment:"comment",rating:"star"})[s]||"info",y=s=>({view:"bg-blue-500",like:"bg-red-500",download:"bg-green-500",share:"bg-purple-500",comment:"bg-orange-500",rating:"bg-yellow-500"})[s]||"bg-gray-500",D=s=>({view:"Ø¹Ø±Ø¶Øª Ù‚ØµØ©",like:"Ø£Ø¹Ø¬Ø¨Øª Ø¨Ù‚ØµØ©",download:"Ø­Ù…Ù‘Ù„Øª Ù‚ØµØ©",share:"Ø´Ø§Ø±ÙƒØª Ù‚ØµØ©",comment:"Ø¹Ù„Ù‚Øª Ø¹Ù„Ù‰ Ù‚ØµØ©",rating:"Ù‚ÙŠÙ…Øª Ù‚ØµØ©"})[s]||"ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ù‚ØµØ©",w=s=>{if(!s)return"ØºÙŠØ± Ù…Ø­Ø¯Ø¯";try{return new Date(s).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ­ÙŠØ­"}},I=s=>({image:"ØµÙˆØ±Ø©",video:"ÙÙŠØ¯ÙŠÙˆ",audio:"ØµÙˆØª",pdf:"ÙƒØªØ§Ø¨ PDF",document:"Ù…Ø³ØªÙ†Ø¯",interactive:"ØªÙØ§Ø¹Ù„ÙŠ",text:"Ù†Øµ"})[s]||"Ù…Ø­ØªÙˆÙ‰",j=s=>({image:"image",video:"play_circle",audio:"music_note",pdf:"picture_as_pdf",document:"description",interactive:"interactive"})[s]||"description",T=_(()=>{const s=e.value||{};return[{label:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©",value:s.totalReadingTime?`${Math.round(s.totalReadingTime/60)} Ø¯Ù‚ÙŠÙ‚Ø©`:"0 Ø¯Ù‚ÙŠÙ‚Ø©"},{label:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",value:s.averageRating?s.averageRating.toFixed(1):"0.0"},{label:"Ø¢Ø®Ø± Ù†Ø´Ø§Ø·",value:s.lastActivity?w(s.lastActivity):"Ù„Ø§ ÙŠÙˆØ¬Ø¯"},{label:"Ø§Ù„Ù‚ØµØµ Ø§Ù„Ù…ÙØ¶Ù„Ø©",value:s.likedStoriesCount||0}]}),A=_(()=>{const s=r.value,o={};return s.forEach(i=>{var m;const l=(m=i.metadata)==null?void 0:m.category;l&&(o[l]=(o[l]||0)+1)}),Object.entries(o).sort(([,i],[,l])=>l-i).slice(0,5).map(([i,l])=>({category:C(i),count:l}))}),C=s=>({ÙˆØ§Ù‚Ø¹ÙŠØ©:"ÙˆØ§Ù‚Ø¹ÙŠØ©",Ø®ÙŠØ§Ù„:"Ø®ÙŠØ§Ù„",Ø¯ÙŠÙ†ÙŠ:"Ø¯ÙŠÙ†ÙŠ",ØªØ¹Ù„ÙŠÙ…ÙŠ:"ØªØ¹Ù„ÙŠÙ…ÙŠ",ØªØ±ÙÙŠÙ‡ÙŠ:"ØªØ±ÙÙŠÙ‡ÙŠ",ØªØ§Ø±ÙŠØ®ÙŠ:"ØªØ§Ø±ÙŠØ®ÙŠ",Ø¹Ù„Ù…ÙŠ:"Ø¹Ù„Ù…ÙŠ",Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ:"Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠ"})[s]||s,U=_(()=>{const s=r.value.filter(i=>i.interactionType==="like"),o=JSON.parse(localStorage.getItem("libraryStories")||"[]");return s.map(i=>{const l=o.find(m=>m.id===i.storyId);return l?{...l,likedAt:i.timestamp}:null}).filter(Boolean).sort((i,l)=>new Date(l.likedAt)-new Date(i.likedAt)).slice(0,6)}),R=s=>{f.push(`/story/${s}`)};return M(()=>{console.log("ğŸš€ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"),x(),k()}),N(()=>{console.log("ğŸ§¹ [Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…] ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…ÙƒÙˆÙ†"),window.removeEventListener("interactionsUpdated",x)}),{userStats:e,recentInteractions:g,detailedStats:T,userPreferences:A,likedStories:U,refreshData:a,getInteractionIcon:u,getInteractionColor:y,getInteractionText:D,formatDate:w,getMediaTypeArabic:I,getTypeIcon:j,viewStory:R}}},z={dir:"rtl",class:"min-h-screen bg-gray-50 dark:bg-gray-900"},H={class:"container mx-auto px-4 py-8"},J={class:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8"},G={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},q={class:"flex items-center justify-between"},K={class:"text-2xl font-bold text-gray-800 dark:text-white"},Q={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},W={class:"flex items-center justify-between"},X={class:"text-2xl font-bold text-gray-800 dark:text-white"},Y={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},Z={class:"flex items-center justify-between"},$={class:"text-2xl font-bold text-gray-800 dark:text-white"},tt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},et={class:"flex items-center justify-between"},st={class:"text-2xl font-bold text-gray-800 dark:text-white"},at={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},rt={class:"lg:col-span-2"},ot={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},nt={class:"flex items-center justify-between mb-6"},it={key:0,class:"space-y-4"},lt={class:"material-icons text-sm"},dt={class:"flex-1"},ct={class:"text-sm font-medium text-gray-800 dark:text-white"},gt={class:"text-xs text-gray-600 dark:text-gray-400"},xt={class:"text-right"},ut={class:"text-sm font-medium text-gray-800 dark:text-white"},yt={class:"text-xs text-gray-600 dark:text-gray-400"},mt={key:1,class:"text-center py-8"},bt={class:"lg:col-span-1"},pt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},ht={class:"space-y-4"},vt={class:"text-sm text-gray-600 dark:text-gray-400"},_t={class:"font-bold text-gray-800 dark:text-white"},ft={class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-600"},kt={class:"space-y-3"},wt={class:"text-sm text-gray-600 dark:text-gray-400"},St={class:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 px-2 py-1 rounded-full"},Dt={class:"mt-8"},It={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6"},jt={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Tt={class:"flex items-center gap-3"},At={class:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center text-white"},Ct={class:"material-icons"},Ut={class:"flex-1"},Rt={class:"font-medium text-gray-800 dark:text-white text-sm line-clamp-1"},Et={class:"text-xs text-gray-600 dark:text-gray-400"},Lt={class:"mt-3 flex items-center justify-between text-xs text-gray-500"},Mt=["onClick"],Nt={key:1,class:"text-center py-8"};function Bt(f,e,g,r,k,x){const h=B("AppHeader");return d(),c("div",z,[F(h),t("main",H,[e[16]||(e[16]=t("div",{class:"mb-8"},[t("h1",{class:"text-3xl font-bold text-gray-800 dark:text-white"},"Ø³Ø¬Ù„ Ù†Ø´Ø§Ø·Ùƒ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ"),t("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø·ÙÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠØ©")],-1)),t("div",J,[t("div",G,[t("div",q,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª",-1)),t("p",K,n(r.userStats.totalViews||0),1)]),e[2]||(e[2]=t("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-xl flex items-center justify-center"},[t("span",{class:"material-icons text-blue-600 dark:text-blue-400"},"visibility")],-1))])]),t("div",Q,[t("div",W,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª",-1)),t("p",X,n(r.userStats.totalLikes||0),1)]),e[4]||(e[4]=t("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-xl flex items-center justify-center"},[t("span",{class:"material-icons text-green-600 dark:text-green-400"},"favorite")],-1))])]),t("div",Y,[t("div",Z,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª",-1)),t("p",$,n(r.userStats.totalComments||0),1)]),e[6]||(e[6]=t("div",{class:"w-12 h-12 bg-purple-100 dark:bg-purple-900 rounded-xl flex items-center justify-center"},[t("span",{class:"material-icons text-purple-600 dark:text-purple-400"},"comment")],-1))])]),t("div",tt,[t("div",et,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Ø§Ù„ØªØ­Ù…ÙŠÙ„Ø§Øª",-1)),t("p",st,n(r.userStats.totalDownloads||0),1)]),e[8]||(e[8]=t("div",{class:"w-12 h-12 bg-orange-100 dark:bg-orange-900 rounded-xl flex items-center justify-center"},[t("span",{class:"material-icons text-orange-600 dark:text-orange-400"},"download")],-1))])])]),t("div",at,[t("div",rt,[t("div",ot,[t("div",nt,[e[10]||(e[10]=t("h2",{class:"text-xl font-bold text-gray-800 dark:text-white"},"Ø§Ù„Ù†Ø´Ø§Ø· Ø§Ù„Ø£Ø®ÙŠØ±",-1)),t("button",{onClick:e[0]||(e[0]=(...a)=>r.refreshData&&r.refreshData(...a)),class:"flex items-center gap-2 px-4 py-2 text-sm text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-xl transition-colors duration-200"},[...e[9]||(e[9]=[t("span",{class:"material-icons text-base"},"refresh",-1),V(" ØªØ­Ø¯ÙŠØ« ",-1)])])]),r.recentInteractions.length>0?(d(),c("div",it,[(d(!0),c(b,null,p(r.recentInteractions,a=>{var u,y;return d(),c("div",{key:a.id,class:"flex items-center gap-4 p-4 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200"},[t("div",{class:O(["w-10 h-10 rounded-full flex items-center justify-center text-white",r.getInteractionColor(a.interactionType)])},[t("span",lt,n(r.getInteractionIcon(a.interactionType)),1)],2),t("div",dt,[t("p",ct,n(r.getInteractionText(a.interactionType)),1),t("p",gt,n(r.formatDate(a.timestamp)),1)]),t("div",xt,[t("p",ut,n(((u=a.metadata)==null?void 0:u.storyTitle)||"Ù‚ØµØ©"),1),t("p",yt,n(r.getMediaTypeArabic((y=a.metadata)==null?void 0:y.storyType)),1)])])}),128))])):(d(),c("div",mt,[...e[11]||(e[11]=[t("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"},[t("span",{class:"material-icons text-gray-400 text-2xl"},"history")],-1),t("h3",{class:"text-lg font-medium text-gray-800 dark:text-white mb-2"},"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ø­Ø¯ÙŠØ«Ø©",-1),t("p",{class:"text-gray-600 dark:text-gray-400"},"Ø§Ø¨Ø¯Ø£ Ø¨ØªØµÙØ­ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù„ØªØ¸Ù‡Ø± Ø£Ù†Ø´Ø·ØªÙƒ Ù‡Ù†Ø§",-1)])]))])]),t("div",bt,[t("div",pt,[e[13]||(e[13]=t("h2",{class:"text-xl font-bold text-gray-800 dark:text-white mb-6"},"Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø©",-1)),t("div",ht,[(d(!0),c(b,null,p(r.detailedStats,a=>(d(),c("div",{key:a.label,class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-xl"},[t("span",vt,n(a.label),1),t("span",_t,n(a.value),1)]))),128))]),t("div",ft,[e[12]||(e[12]=t("h3",{class:"text-lg font-bold text-gray-800 dark:text-white mb-4"},"ØªÙØ¶ÙŠÙ„Ø§ØªÙƒ",-1)),t("div",kt,[(d(!0),c(b,null,p(r.userPreferences,a=>(d(),c("div",{key:a.category,class:"flex justify-between items-center p-2"},[t("span",wt,n(a.category),1),t("span",St,n(a.count)+" Ù‚ØµØ© ",1)]))),128))])])])])]),t("div",Dt,[t("div",It,[e[15]||(e[15]=t("h2",{class:"text-xl font-bold text-gray-800 dark:text-white mb-6"},"Ø§Ù„Ù‚ØµØµ Ø§Ù„ØªÙŠ Ø£Ø¹Ø¬Ø¨ØªÙƒ",-1)),r.likedStories.length>0?(d(),c("div",jt,[(d(!0),c(b,null,p(r.likedStories,a=>(d(),c("div",{key:a.id,class:"border border-gray-200 dark:border-gray-700 rounded-xl p-4 hover:shadow-lg transition-shadow duration-200"},[t("div",Tt,[t("div",At,[t("span",Ct,n(r.getTypeIcon(a.storyType)),1)]),t("div",Ut,[t("h4",Rt,n(a.title),1),t("p",Et,n(a.category),1)])]),t("div",Lt,[t("span",null,n(r.formatDate(a.likedAt)),1),t("button",{onClick:u=>r.viewStory(a.id),class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}," Ø¹Ø±Ø¶ Ø§Ù„Ù‚ØµØ© ",8,Mt)])]))),128))])):(d(),c("div",Nt,[...e[14]||(e[14]=[t("div",{class:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4"},[t("span",{class:"material-icons text-gray-400 text-2xl"},"favorite_border")],-1),t("h3",{class:"text-lg font-medium text-gray-800 dark:text-white mb-2"},"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚ØµØµ Ù…Ø¹Ø¬Ø¨Ø©",-1),t("p",{class:"text-gray-600 dark:text-gray-400"},"Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨ ÙÙŠ Ø§Ù„Ù‚ØµØµ Ù„ØªØ¸Ù‡Ø± Ù‡Ù†Ø§",-1)])]))])])])])}const Vt=E(P,[["render",Bt],["__scopeId","data-v-1f3e555a"]]);export{Vt as default};
